<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Consensus Rules Regole di consenso  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_intermedio.html">intermedio</a></li><li class="breadcrumb-item"><a href="intermedio_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>Consensus Rules</p><p><span class="flag-icon flag-icon-it"></span><span> </span>Regole di consenso</p></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_intermedio.html" class="badge bg-primary">intermedio</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Nel protocollo Bitcoin il termine Consensus Rules, in italiano Regole di consenso, viene utilizzato a quell'insieme di criteri di validazione rigorosi, non negoziabili e universalmente applicati che tutti i full node della rete Bitcoin devono far rispettare per determinare la validità delle transazioni e dei blocchi.</p>
<p>Queste regole definiscono collettivamente lo stato condiviso e la storia del registro Bitcoin (la blockchain), garantendo che tutti i partecipanti onesti convergano sulla stessa versione della verità.  Sono codificate direttamente nel software del nodo client e rappresentano la definizione fondamentale del protocollo stesso.</p>
<p>Nella classificazione del protocollo Bitcoin e dei meccanismi di consenso  rappresentano una distinzione rispetto alle <a href="policy-rules.html">Policy rules</a>.</p>
<h4>Scopo</h4>
<p>Lo scopo primario delle regole di consensus è permettere alla rete distribuita di raggiungere un accordo univoco e coerente sullo stato del registro, nonostante l'assenza di un'autorità centrale e la potenziale presenza di attori malintenzionati.</p>
<p>Servono a:</p>
<ul>
<li><strong>Garantire la Validità</strong>: Stabilire i criteri oggettivi per cui una transazione o un blocco sono considerati validi e possono essere aggiunti alla blockchain.</li>
<li><strong>Prevenire Attacchi Fondamentali</strong>: Impedire azioni fraudolente come il double-spending (spendere gli stessi bitcoin più volte) e la spesa non autorizzata (spendere bitcoin senza possedere la chiave privata corrispondente).</li>
<li><strong>Definire le Proprietà Economiche</strong>: Stabilire le caratteristiche monetarie fondamentali di Bitcoin, come l'offerta limitata e il tasso di emissione decrescente (halving).</li>
<li><strong>Mantenere la Coerenza della Storia</strong>: Assicurare che la blockchain sia un registro cronologico e immutabile degli eventi.</li>
</ul>
<h4>Caratteristiche</h4>
<p>Le regole di consensus sono caratterizzate da:</p>
<ul>
<li><strong>Obbligatorietà e Universalità</strong>: Ogni full node che partecipa alla rete deve aderire esattamente allo stesso set di regole di consensus. Qualsiasi deviazione, anche minima, porta all'incompatibilità con il resto della rete.</li>
<li><strong>Ambito Globale</strong>: Si applicano all'intera rete Bitcoin, non sono specifiche di un singolo nodo. L'accordo su queste regole è ciò che definisce la rete stessa.</li>
<li><strong>Immutabilità (Pratica) e Difficoltà di Modifica</strong>: Cambiare le regole di consensus è un processo complesso e delicato che richiede un ampio accordo all'interno della comunità e un aggiornamento coordinato del software su tutta la rete. Questo avviene tipicamente tramite un soft fork (introducendo regole più restrittive, compatibili con i vecchi nodi) o un hard fork (introducendo cambiamenti incompatibili che richiedono l'aggiornamento di tutti i nodi). Gli hard fork sono particolarmente rischiosi perché, in assenza di un consenso quasi unanime ("near-unanimity"), possono portare a una divisione permanente della rete e della valuta.</li>
</ul>
<p>Un aspetto sottile ma fondamentale è che il "consensus" non riguarda solo le regole scritte in una specifica, ma anche la loro precisa implementazione nel software client dominante (storicamente, Bitcoin Core).<br />
Anche bug, stranezze o interpretazioni specifiche nell'implementazione di riferimento possono diventare, di fatto, regole di consensus. Questo perché qualsiasi nodo che si discosti da questo comportamento preciso, anche se aderisce alla regola "intesa", rischierebbe di produrre blocchi o transazioni considerati invalidi dalla maggioranza della rete, perdendo così la sincronizzazione. Di conseguenza, raggiungere il consenso in pratica significa aderire al comportamento esatto dell'implementazione di riferimento, compresi i suoi eventuali difetti, fino a quando questi non vengono corretti tramite un aggiornamento coordinato della rete (fork). Ciò rende la creazione da zero di implementazioni alternative di full node estremamente difficile e rischiosa, data la necessità di una perfetta compatibilità comportamentale.
Inoltre, il meccanismo di consenso di Bitcoin, spesso chiamato Nakamoto Consensus, non è semplicemente un insieme statico di regole, ma un processo emergente. L'accordo sulla catena valida emerge dall'interazione di nodi che seguono regole semplici (validare secondo le regole di consensus, costruire sulla catena valida più lunga vista per prima) e sono guidati da incentivi economici (i miner cercano di ottenere le ricompense dei blocchi evitando di creare blocchi orfani). I nodi validano blocchi e transazioni in base alle regole fisse. I miner investono potenza di calcolo (Proof-of-Work) per creare nuovi blocchi validi, estendendo la catena che percepiscono come la più lunga e valida. I nodi accettano il primo blocco valido che vedono estendere la catena più lunga. Gli incentivi economici spingono i miner a costruire sulla catena che ha la maggiore probabilità di essere accettata dagli altri, minimizzando il rischio di lavoro sprecato su blocchi orfani. Nel tempo, questo processo porta la rete a convergere su un'unica storia della catena, superando disaccordi temporanei (fork accidentali). Il consenso, quindi, è dinamico e probabilistico nel breve termine (finché i blocchi non sono profondamente sepolti nella catena), basandosi tanto sulla teoria dei giochi e sugli incentivi economici quanto su regole deterministiche.</p>
<h4>Applicazione e Conseguenze della Violazione</h4>
<ul>
<li><strong>Meccanismo di Applicazione</strong>: L'applicazione delle regole di consensus è distribuita. Ogni full node verifica autonomamente e indipendentemente ogni transazione ricevuta e ogni nuovo blocco proposto rispetto all'intero set di regole di consensus. I miner, a loro volta, includono nei blocchi che propongono solo transazioni che hanno precedentemente validato come conformi a queste regole.</li>
<li><strong>Conseguenze della Violazione</strong>: Qualsiasi transazione o blocco che violi anche una sola regola di consensus è considerato universalmente invalido e viene immediatamente rigettato da tutti i nodi conformi al protocollo. Un nodo che riceve dati invalidi può decidere di disconnettere e bannare temporaneamente il peer che li ha inviati per proteggersi da spam o attacchi. I miner che tentano di costruire blocchi invalidi o di estendere una catena contenente un blocco invalido sprecano le loro risorse computazionali (elettricità) e non riceveranno alcuna ricompensa, poiché i loro blocchi verranno ignorati dal resto della rete (diventando blocchi orfani). Un disaccordo fondamentale e persistente sulle regole di consensus tra diverse fazioni della rete porta inevitabilmente a un hard fork, ovvero a una scissione permanente della blockchain in due catene distinte e incompatibili.</li>
</ul>
<h4>Esempi Illustrativi di Regole di Consensus</h4>
<p>Esistono numerose regole di consensus in Bitcoin. Alcuni esempi fondamentali includono:</p>
<ul>
<li>
<p><strong>Algoritmo Proof-of-Work (PoW)</strong>: I blocchi devono contenere un hash valido (calcolato tramite SHA-256d sull'header del blocco) che sia inferiore al target di difficoltà corrente.</p>
</li>
<li>
<p><strong>Aggiustamento della Difficoltà</strong>: L'algoritmo che regola il target di difficoltà del PoW ogni 2016 blocchi (circa due settimane) per mantenere un tempo medio di generazione dei blocchi intorno ai 10 minuti, nonostante le variazioni nella potenza di calcolo totale della rete.</p>
</li>
<li>
<p><strong>Programma di Emissione (Halving)</strong>: La regola predefinita che dimezza la ricompensa per i miner (sussidio di blocco) ogni 210.000 blocchi (circa ogni quattro anni), controllando l'offerta di nuovi bitcoin. L'attuale ricompensa è di 3.125 BTC per blocco.</p>
</li>
<li>
<p><strong>Limiti sulla Dimensione/Peso del Blocco</strong>: Regole che definiscono la dimensione massima (in byte) o il peso massimo (in weight units, introdotte con SegWit) di un blocco valido. Storicamente era 1MB, ora con SegWit il limite è di 4 milioni di weight units. (Nota: BSV ha rimosso questi limiti fissi, considerandoli "consensus mutabile" ).</p>
</li>
<li>
<p><strong>Criteri di Validità delle Transazioni</strong>:</p>
</li>
<li><em>Verifica delle Firme Digitali</em>: Le transazioni devono contenere firme ECDSA valide che dimostrino la proprietà degli input spesi, verificabili tramite la chiave pubblica corrispondente (es. OP_CHECKSIG).</li>
<li>Bilancio della Transazione: La somma dei valori degli input di una transazione deve essere maggiore o uguale alla somma dei valori degli output. La differenza costituisce la commissione per il miner.</li>
<li><em>Prevenzione del Double-Spending</em>: Gli input di una transazione devono fare riferimento a output di transazioni precedenti (UTXO) che non siano già stati spesi nella stessa catena.</li>
<li>
<p><em>Maturità della Coinbase</em>: I bitcoin appena creati in una transazione coinbase (la prima transazione di un blocco, che include il sussidio e le commissioni) possono essere spesi solo dopo che sono stati confermati da 100 blocchi successivi.</p>
</li>
<li>
<p><strong>Formato dei Dati</strong>: Transazioni e blocchi devono aderire a specifiche strutture dati e formati di serializzazione per essere considerati validi. Il formato raw della transazione è parte delle regole di consensus poiché il suo hash contribuisce al merkle root del blocco.</p>
</li>
<li>
<p><strong>Validità dello Script</strong>: Regole che governano l'esecuzione e la validità degli opcode utilizzati nel linguaggio di scripting di Bitcoin (Script) per definire le condizioni di spesa degli output.</p>
</li>
<li>
<p><strong>Regola del Blocco Genesi</strong>: Tutti i blocchi validi devono discendere, direttamente o indirettamente, dal blocco genesi originale creato da Satoshi Nakamoto.</p>
</li>
</ul>
<h4>Cartella src/consensus nel codice sorgente di Bitcoin</h4>
<p>La cartella src/consensus nel codice sorgente di Bitcoin Core è una directory fondamentale che contiene la logica centrale per la validazione di blocchi e transazioni secondo le regole di consenso del protocollo Bitcoin. Queste regole sono essenziali per la sicurezza e l'integrità della rete Bitcoin, garantendo che tutti i nodi completi partecipanti concordino sulla stessa storia delle transazioni e sullo stato attuale della blockchain.</p>
<p>Questa cartella è distinta dal codice relativo alle "policy" (politiche), che potrebbe dettare come i singoli nodi danno priorità o gestiscono le transazioni (ad esempio, nel loro mempool), ma non influisce sulla validità fondamentale di blocchi e transazioni concordata dalla rete. Il codice all'interno di src/consensus deve essere deterministico e strettamente seguito da tutti i nodi completi per prevenire fork e mantenere un'unica blockchain coerente.</p>
<p>I file chiave e i loro scopi generali trovati all'interno della cartella src/consensus includono:</p>
<ul>
<li><strong>consensus.h</strong>: Questo file header definisce varie costanti e parametri critici per il consenso. Questi possono includere valori come la dimensione massima consentita per un blocco (o il peso, nelle versioni più recenti), il numero massimo di operazioni di firma consentite per blocco o transazione, il periodo di maturazione delle coinbase (quanti blocchi devono passare prima che l'output di una transazione coinbase possa essere speso) e altri limiti e parametri che fanno parte delle regole di consenso della rete.</li>
<li><strong>validation.h / validation.cpp</strong>: Questi file contengono le funzioni e la logica responsabile della validazione di transazioni e blocchi rispetto alle regole di consenso definite. Ciò implica il controllo delle firme, la verifica dell'esecuzione degli script, la garanzia del rispetto dei limiti di dimensione, la validazione della struttura di transazioni e blocchi e la conferma che le transazioni non stiano tentando di effettuare doppi spese (double-spending) di output. Qui è dove vengono implementati i controlli dettagliati che determinano se un blocco o una transazione è valido secondo le regole della rete.</li>
<li><strong>amount.h</strong>: Questo file definisce probabilmente i tipi di dati e le funzioni per la gestione degli importi in Bitcoin e garantisce che i calcoli che coinvolgono gli importi aderiscano alle regole di consenso, inclusi i controlli relativi alla fornitura massima di moneta (MAX_MONEY) per prevenire bug inflazionistici.</li>
</ul></p></section><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="policy-rules.html">Policy rules</a></li><li class="list-group-item list-group-item-action"><a href="consensus-mechanism.html">Consensus Mechanism</a> Meccanismo di Consenso</li><li class="list-group-item list-group-item-action"><a href="nakamoto-consensus.html">Nakamoto Consensus</a> Consenso di Nakamoto</li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2025-05-02</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>