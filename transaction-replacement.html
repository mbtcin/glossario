<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Transaction replacement Sostituzione della transazione  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_avanzato.html">avanzato</a></li><li class="breadcrumb-item"><a href="avanzato_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>Transaction replacement</p><p><span class="flag-icon flag-icon-it"></span><span> </span>Sostituzione della transazione</p></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_avanzato.html" class="badge bg-primary">avanzato</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Transaction Replacement, o sostituzione della transazione, a volte indicata più porecisamente come unconfirmed transaction replacement si riferisce alla possibilità di sostituzione di una transazione nella <a href="mempool.html">mempool</a>, ovvero non ancora confermata nella blockchain, con una nuova transazione.</p>
<p>Ci sono diversi motivi per si può voler sostituire o meglio aggiornare le transazioni: per aumentare le loro fee, comprimere più transazioni in una sola, creare <a href="coinjoin.html">coinjoin</a> in background (per migliorare la privacy) o eseguire una serie di altre azioni utili.</p>
<p>Questa sostituzione attualmente può avvenire attraverso comportamenti ben definiti, quali <a href="rbf.html">RBF Replace-by-fee</a>.</p>
<p>La sostituzione delle transazioni non <a href="confirmation.html">confermate</a> era una caratteristica della prima versione del client bitcoin scritto da Satoshi Nakamoto, si basava sul valore nSequence della transazione, il che significa che era possibile emettere una nuova transazione e i nodi l'accettavano se l'ID della sequenza era più alto sostituendo la transazione esistente nella mempool. Questa funzione è stata rimossa dal client nella versione 0.3.12 (settembre 2010). Satoshi Nakamoto ha commentato questa rimozione: "Disabilita la funzione di sostituzione per ora", perché era possibile per un aggressore utilizzare tutta la larghezza di banda tra i full node con un costo minimo per se stesso, creando una <a href="ddos.html">vulnerabilità denial-of-service</a>.</p>
<p>Tale funzionalità è rimasta assente nel client principale per molti anni da allora.</p>
<p>La regola generalmente accettata dalla rete (miner, nodi non mining) per molti anni è stata la <a href="fss.html">FSS First-Seen-Safe</a>, ovvero che i nodi, quando ricevevano le transazioni, controllavano se nella mempool c'era già un'altra transazione che stava spendendo lo stesso UTXO, e nel caso in cui tale transazione fosse stata trovata, la nuova veniva rifiutata.</p>
<p>I <a href="miner.html">miner</a> possono usare versioni personalizzate del software Bitcoin, e quando un miner confeziona un nuovo blocco ha la libertà di selezionare quali transazioni inserire, e non erano incentivati a seguire questa convenzione e ad accettare una sostituzione, e potevano addirittura essere incentivati a violare questa convenzione se una versione precedente di una transazione pagava una <a href="fee.html">fee</a> più alta.</p>
<p>Questi due fattori hanno impedito per alcuni anni che la Transaction Replacement fosse ripristinata su <a href="bitcoin-core.html">Bitcoin Core</a>, ma nel 2013 Peter Todd ha proposto di imporre alle Transaction Replacement di pagare fee rigorosamente maggiori e di richiedere che la sostituzione aumenti la fee almeno del minimo richiesto per trasmettere una nuova transazione. In questo modo si eliminavano i problemi di denial of service e di compatibilità degli incentivi.</p>
<p>Il lavoro originale di Peter Todd è andato oltre e ha portato la compatibilità degli incentivi alla sua logica conclusione, ragionando sul fatto che con miner anonimi, effimeri e autoselezionati l'unico comportamento su cui si può davvero contare è l'incentivo economico e quindi la sostituzione con fee più alte. La preferenza per fee più elevate può anche rendere possibile ai nodi di convergere su un insieme di transazioni nella mempool in base alle fee in modo che non sia possibile per i nodi accettare solo la prima versione che viene vista di una transazione.</p>
<p>Per questi motivi e poiché un sistema che si comporta in modi prevedibili è più sicuro e protetto di un sistema che si comporta in "modi imprevedibili ma mediamente migliori", ha proposto che la sostituzione avvenga per tutte le transazioni. Ha anche proposto un protocollo per rimuovere i guadagni economici derivanti dal <a href="double-spend.html">Double Spend</a> in un modo fortemente compatibile con gli incentivi, chiamato <em>replacement scorched earth</em> (terra bruciata), in cui se qualcuno tenta di spendere due volte, si spendono tutti i fondi per le fee in modo che l'attaccante non li ottenga. (Ma questo è il tipo di proposta che solo un teorico dei giochi potrebbe amare).</p>
<p>Dopo la proposta di Peter Todd, alcuni produttori di wallet hanno chiesto con forza un RBF <a href="opt-in.html">opt-in</a>, in quanto avevano bisogno di un modo ragionevole per gestire le fee e vedevano nell'RBF opt-in un buon modo per farlo, motivo per cui la proposta è stata cambiata in modo da corrispondere al comportamento opt-in originale di Satoshi.</p>
<p>A partire da Bitcoin Core 0.12.0 (rilasciata nel febbraio 2016), è diventato ampiamente disponibile il tipo di transaction replaceability RBF replace-by-fee.</p>
<p>Dalla versione 0.16.0 (febbraio 2018) di Bitcoin Core le transazioni RBF sono diventate un comportamento predefinito (da <a href="opt-in.html">opt-in</a> a opt-out) e la <a href="transaction-replacement.html">Transaction replacement</a>, la sostituzione delle transazioni è diventata uno standard de facto sulla rete. Tale cambiamento è stato collegato al limite di 1Mb del blocco e si è reso necessario uno strumento per gli utenti per sostituire le transazioni bloccate.</p>
<p>L'attributo più controverso di RBF è che permetteva di inviare fondi a indirizzi assolutamente diversi tramite la modalità definità <a href="full-rbf.html">Full RBF</a>, il che significa praticamente che gli utenti possono tentare un <a href="double-spend.html">double spend</a> tramite un <a href="race-attack.html">Race Attack</a> con un software standard.</p>
<p>E la polemica si è accesa ulteriormente con l'annuncio che la versione 24.0 di Bitcoin Core avrà Full-RBF abilitata di default.</p></p></section><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="0-conf.html">0-conf</a> (zeroconf o zero confirmation)</li><li class="list-group-item list-group-item-action"><a href="bip-125-rbf.html">BIP 125 (RBF)</a> (Replace-by-Fee)</li><li class="list-group-item list-group-item-action"><a href="fss.html">FSS</a> (First-Seen-Safe)</li><li class="list-group-item list-group-item-action"><a href="full-rbf.html">Full RBF</a></li><li class="list-group-item list-group-item-action"><a href="mempool.html">Mempool</a></li><li class="list-group-item list-group-item-action"><a href="rbf.html">RBF</a> (Replace-by-fee)</li><li class="list-group-item list-group-item-action"><a href="tx.html">TX</a> (Transaction) Transazione</li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2022-11-05</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>