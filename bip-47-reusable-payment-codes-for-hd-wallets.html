<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>BIP 47 (Reusable Payment Codes for HD Wallets)  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_avanzato.html">avanzato</a></li><li class="breadcrumb-item"><a href="avanzato_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>BIP 47 (Reusable Payment Codes for HD Wallets)</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_avanzato.html" class="badge bg-primary">avanzato</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Il BIP47 è un <a href="bip.html">BIP</a> Bitcoin Improvement Proposal o proposta di miglioramento bitcoin, per creare codici di pagamento riutilizzabili, proteggendo la privacy degli utenti per i pagamenti ricorrenti.<br />
Senza il BIP47, gli utenti devono generare manualmente nuovi indirizzi per evitare l'<a href="address-reuse.html">Address reuse</a> o la riutilizzazione di indirizzi.</p>
<p>Quando un utente riutilizza un indirizzo per le transazioni, consente a chiunque stia osservando la blockchain di raggruppare facilmente tutte le transazioni appartenenti all'indirizzo riutilizzato e formare un grafico della storia dei pagamenti dell'utente e del suo patrimonio.<br />
Prevenire la riutilizzazione degli indirizzi è quindi una pratica migliore per la privacy in Bitcoin e già implementata in molte wallet Bitcoin per impostazione predefinita.<br />
Tuttavia, quando un utente vuole stabilire pagamenti ricorrenti con un'altra parte, come in una relazione commerciante-cliente, la generazione frequente di nuovi indirizzi può essere scomoda.</p>
<p>Con il BIP47, un cliente può generare un set di indirizzi da utilizzare per i pagamenti per il commerciante. Se un cliente acquista prodotti mensilmente, il commerciante dovrebbe inviare al cliente un indirizzo ogni mese. Con il BIP47, il cliente crea un codice di pagamento dedicato per il commerciante, che funziona in modo simile a una chiave pubblica estesa.<br />
Ciò consente al cliente di generare automaticamente nuovi indirizzi per il commerciante, invece che il commerciante dover creare indirizzi per il cliente.</p>
<p>Il BIP47 utilizza gli indirizzi di notifica, che sono monitorati dai <a href="hd-wallet.html">wallet HD</a> per gli output. In una transazione di notifica, il commerciante invia al cliente una blinded public key, una chiave pubblica offuscata, e un codice di catena tramite il campo <a href="op_return.html">OP_RETURN</a>, insieme a un segreto condiviso per mantenere privati gli indirizzi condivisi sulla blockchain pubblica.<br />
Questo scambio crea diversi problemi a causa dell'architettura della rete Bitcoin. I primi due sono economici: una transazione di notifica consiste in 80 byte, che possono diventare costosi per gli utenti quando le commissioni sulla rete Bitcoin sono alte. Le transazioni di notifica, inoltre, creano output non inviabili, che gonfiano l'<a href="utxo-set.html">UTXO Set</a> nel tempo. Ciò aumenta il carico di calcolo sui nodi Bitcoin che, al momento, devono memorizzare l'intero UTXO Set, ovvero ogni output Bitcoin che non è stato utilizzato come nuovo input per garantire la validità delle transazioni.</p>
<p>BIP47 definisce lo standard per la creazione di un codice di pagamento che può essere pubblicizzato pubblicamente e associato a un'identità reale (o a uno pseudonimo) senza creare la perdita di sicurezza o di privacy insita nel riutilizzo degli indirizzi.</p>
<p>A differenza dei normali indirizzi Bitcoin, un codice di pagamento BIP47 viene utilizzato tra le parti coinvolte (mittente e destinatario) per generare un nuovo indirizzo ogni volta che viene effettuato un pagamento, evitando il riutilizzo degli indirizzi.</p>
<p>Il BIP47 non definisce un tipo di indirizzo, ma definisce un modo per un utente di generare indirizzi che possano essere usati da un altro utente senza dover interagire direttamente con lui e conoscendo solo il suo codice di pagamento pubblico. </p>
<p>Ecco un breve riassunto di come funziona. Nell'esempio, Alice paga Bob:</p>
<ol>
<li>Alice riceve il codice di pagamento di Bob. Oltre ad alcuni metadati, questo codice contiene l'<a href="xpub.html">xpub</a> di Bob al <a href="derivation-path.html">Derivation Path</a> 47;</li>
<li>Alice prepara una transazione di notifica. Sceglie uno dei suoi <a href="utxo.html">UTXO</a> e crea un segreto condiviso S = k.B, dove k è la <a href="private-key.html">chiave privata</a> di uno dei suoi UTXO e B è la prima chiave pubblica dell'xpub di Bob. Cifra il proprio codice di pagamento applicando lo XOR tra il proprio codice e HMAC-SHA512(o, Sx), dove o è il precedente punto di uscita dell'UTXO e Sx è la coordinata X di S;</li>
<li>Invia la transazione all'indirizzo di notifica di Bob, che è il primo indirizzo dell'xpub di Bob, includendo il suo codice di pagamento criptato nell'OP_RETURN;</li>
<li>Bob legge l'OP_RETURN e trova S = b.K, dove b è la chiave privata di B e K la chiave pubblica di k. Bob ottiene K e o dalla transazione di notifica. Con queste informazioni è in grado di recuperare il codice di pagamento di Alice;</li>
<li>Alice può ora ricavare nuovi indirizzi e inviare pagamenti a Bob moltiplicando la chiave privata a dal suo codice di pagamento e le chiavi pubbliche B0, B1, B2 ecc. di Bob dal suo codice di pagamento.<br />
Bob farà il contrario: b0.A, b1.A, b2.A ecc;</li>
</ol></p></section><div><ul class="list-group  list-group-flush"><li class="list-group-item fw-bold">Link utili:</li><li class="list-group-item"><a href="https://github.com/bitcoin/bips/blob/master/bip-0047.mediawiki">Il testo della BIP 47 Reusable Payment Codes for Hierarchical Deterministic Wallets (in inglese)</a></li><li class="list-group-item"><a href="https://medium.com/@ottosch/how-bip47-works-ee641cc14bf3">How BIP47 Works (in inglese)</a></li></ul></div><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="address-reuse.html">Address reuse</a> Riutilizzo dell'indirizzo</li><li class="list-group-item list-group-item-action"><a href="bip-32-hd-wallet.html">BIP 32 (HD Wallet)</a></li><li class="list-group-item list-group-item-action"><a href="bip352-silent-payments.html">BIP352 silent payments</a></li><li class="list-group-item list-group-item-action"><a href="chain-analysis.html">Chain Analysis</a></li><li class="list-group-item list-group-item-action"><a href="hd-wallet.html">HD wallet</a> (Hierarchical Deterministic wallet) Wallet deterministici gerarchici</li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2024-05-11</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>