<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>BIP 118 (ANYPREVOUT)  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_avanzato.html">avanzato</a></li><li class="breadcrumb-item"><a href="avanzato_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>BIP 118 (ANYPREVOUT)</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_avanzato.html" class="badge bg-primary">avanzato</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Anyprevout, a volte abbreviato con la sigla APO, è un modo per rendere più flessibile la creazione di transazioni Bitcoin.</p>
<p>In una <a href="tx.html">transazione</a> Bitcoin normale, è necessario specificare esattamente quale <a href="utxo.html">output</a> precedente si vuole utilizzare come input in ingresso. Con Anyprevout, invece, è possibile firmare una transazione senza fare riferimento ad un output specifico in ingresso e poi aggiungere dinamicamente qualsiasi output con la firma corrispondente in un secondo momento. Ciò significa che è possibile creare transazioni più flessibili, indicando ad esempio dove si vuole ricevere il pagamento e poi rendere disponibile questa transazione a chi può e vuole completandola indicando da dove vengono presi i fondi da trasferire.</p>
<p>BIP-118 SIGHASH_ANYPREVOUT (chiamata in precedenza SIGHASH_NOINPUT) è la proposta di <a href="soft-fork.html">soft-fork</a> che consente di firmare una transazione senza fare riferimento a uno specifico output precedente. Qualsiasi output con una firma corrispondente può essere aggiunto dinamicamente in seguito.</p>
<p>È stata implementata nella <a href="testnet.html">testnet</a> da dicembre 2022.</p>
<p>SIGHASH_ANYPREVOUT è un nuovo tipo di <a href="sighash-flag.html">Sighash flag</a>: i Sighash flag si trovano all'interno delle transazioni Bitcoin per indicare quale parte della transazione è firmata esattamente dalle chiavi private richieste. Può trattarsi di (quasi) l'intera transazione o di parti specifiche di essa. Firmare solo parti specifiche consente una certa flessibilità nel modificare la transazione anche dopo che è stata firmata, cosa che a volte può essere utile.</p>
<p>Con questa proposta, Sighash flag Anyprevout firma la maggior parte della transazione, ma non gli input. Ciò significa che gli input possono essere scambiati, purché i nuovi input siano ancora compatibili con la firma.</p>
<p>Un uso potenziale può essere relativo ai protocolli <a href="off-chain.html">off-chain</a> come <a href="lightning-network.html">Lightning Network</a> che sono basati sullo scambio di transazioni che non vengono  trasmesse subito alla rete Bitcoin per rinegoziare lo stato finale che dovrebbe essere regolato <a href="on-chain.html">on-chain</a>.</p>
<p>In alcuni casi si può voler rispondere a una determinata transazione che viene vista on-chain con una reazione predeterminata sotto forma di un'altra transazione.</p>
<p>Spesso questa risposta può essere richiesta per una serie di transazioni diverse che vengono viste on-chain, ma poiché le firme di input nella transazione di risposta sono vincolate a fare riferimento all'esatta transazione a cui si sta reagendo, ciò significa che deve essere creata una nuova firma per ogni possibile transazione a cui si desidera essere in grado di reagire.</p>
<p>La BIP 118 introduce un nuovo tipo di chiave pubblica che modifica il comportamento dell'algoritmo di <a href="digest.html">digest</a> delle transazioni utilizzato nella creazione e nella verifica della firma, escludendo il <a href="commitment.html">commitment</a> nei confronti dell'output precedente (e, opzionalmente, del witness script e del valore). L'eliminazione di questo commitment consente il rebinding dinamico di una transazione firmata a un altro output precedente che richiede l'autorizzazione della stessa chiave.</p>
<p>Il rebinding dinamico è <a href="opt-in.html">opt-in</a> a causa dell'utilizzo di un tipo di chiave pubblica separata, e l'ampiezza delle transazioni a cui la firma può essere legata (rebound) può essere ulteriormente limitata utilizzando chiavi diverse, effettuando il commitment sullo script che viene speso nella firma, utilizzando importi diversi tra gli UTXO, utilizzando valori diversi di nSequence nella transazione di spesa, o utilizzando l'opcode codeseparator per impegnarsi sulla posizione nello script.</p>
<p>Per la proposta di layer <a href="eltoo.html">Eltoo</a> per Lightning Network è necessario un sighash di tipo noinput.</p></p></section><div><ul class="list-group  list-group-flush"><li class="list-group-item fw-bold">Link utili:</li><li class="list-group-item"><a href="https://anyprevout.xyz/">Il sito anyprevout.xyz di Fiatjaf</a></li><li class="list-group-item"><a href="https://bitcoinmagazine.com/technical/how-sighash-anyprevout-and-eltoo-could-improve-the-lightning-network">l'episodio del podcast The Van Wirdum Sjorsnado che parla di SIGHASH_ANYPREVOUT e Eltoo</a></li><li class="list-group-item"><a href="https://github.com/bitcoin/bips/blob/master/bip-0118.mediawiki">Il testo della BIP 118 SIGHASH_ANYPREVOUT for Taproot Scripts</a></li></ul></div><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="bip.html">BIP</a> (Bitcoin Improvement Proposal)</li><li class="list-group-item list-group-item-action"><a href="bip-119-ctv.html">BIP 119 (CTV)</a> (Check Template Verify)</li><li class="list-group-item list-group-item-action"><a href="bip-174-psbt.html">BIP 174 (PSBT)</a> (Partially Signed Bitcoin Transaction Format) Formato di transazione Bitcoin parzialmente firmato</li><li class="list-group-item list-group-item-action"><a href="eltoo.html">Eltoo</a></li><li class="list-group-item list-group-item-action"><a href="off-chain.html">Off Chain</a></li><li class="list-group-item list-group-item-action"><a href="on-chain.html">On Chain</a></li><li class="list-group-item list-group-item-action"><a href="sighash-flag.html">Sighash flag</a></li><li class="list-group-item list-group-item-action"><a href="taproot.html">Taproot</a></li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2022-09-30</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>