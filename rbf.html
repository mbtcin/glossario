<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>RBF Replace-by-fee  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_intermedio.html">intermedio</a></li><li class="breadcrumb-item"><a href="intermedio_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>RBF</p><p class="fs-6"><span class="text-secondary">acronimo di: </span>Replace-by-fee</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_intermedio.html" class="badge bg-primary">intermedio</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>RBF o Replace-by-fee consente di velocizzare la conferma di una transazione aumentando le fee.</p>
<p>È una funzionalità introdotta nel protocollo Bitcoin nel 2015 tramite la proposta <a href="bip-125-rbf.html">BIP 125</a> che consente ad una <a href="tx.html">transazione</a> di modificare le <a href="fee.html">fee</a> (le commissioni per <a href="confirmation.html">confermare</a> la transazione) se la transazione è ancora nella mempool e non è stata ancora inserita nella (blockchain.html) Bitcoin.</p>
<p>Capita spesso che ci siano dei periodi nei quali la quantità di transazioni in attesa di essere incluse nella blockchain è superiore alla <a href="block-size.html">disponibilità di spazio</a> nei nuovi <a href="block.html">blocchi</a> della blockchain[blockchain].</p>
<p>Poiché il <a href="miner.html">miner</a> che riesce a <a href="mining.html">minare</a> un nuovo blocco guadagna anche dalle fee delle transazioni, e poiché non tutte le transazioni in attesa potrebbero essere inserite nello spazio limitato di un blocco, il miner andrà a selezionare quelle transazioni che hanno delle fee che gli consentono di guadagnare di più.</p>
<p>Le transazioni competono per essere incluse nel blocco successivo risolto da un miner in base all'importo delle fee o commissione di transazione della rete Bitcoin che la transazione offre di pagare.</p>
<p>Le transazioni la cui fee non è sufficientemente competitiva rimarranno nella <a href="mempool.html">mempool</a>, in attesa che i miner eliminino le transazioni che hanno pagato una fee più alta.</p>
<p>I diversi nodi gestiscono la mempool in modo diverso, e possono consentire che le transazioni che si trovano nella loro mempool possano essere modificate o meglio sostituite.</p>
<p>Le modalità RBF possono essere classificate in 2 categorie:</p>
<ul>
<li><a href="opt-in.html">opt-in</a> RBF, nel quale è l'utente che segnala quando crea la transazione che vuole poter modificare le fee nel caso la transazione </li>
<li><a href="full-rbf.html">Full RBF</a>, ovvero il nodo è impostato per consentire la <a href="transaction-replacement.html">sostituzione della transazione</a> quando ci siano delle condizioni opportune anche se l'utente non ha esplicitamente impostata la transazione come RBF.</li>
</ul>
<p>Generalmente quando non si esplicita se sia opt-in RBF o Full RBF, si intende opt-in RBF.</p>
<p>Ci sono diversi motivi per si può voler sostituire o meglio aggiornare le transazioni: per aumentare le loro fee, comprimere più transazioni in una sola, creare <a href="coinjoin.html">coinjoin</a> in background (per migliorare la privacy) o eseguire una serie di altre azioni utili.</p>
<p>La possibilità di aumentare le fee di una transazione non ancora confermata è utile sia per fare in modo che venga confermata più velocemente quando ci sono troppe transazioni con fee più convenienti per i miner, che come strategia per pagare fee più basse: se il vostro <a href="wallet.html">wallet</a> supporta RBF e tale supporto è abilitato per una transazione, potete scegliere tranquillamente la fascia più bassa della commissione di transazione. Se la transazione non viene confermata abbastanza presto per voi, potete semplicemente aumentare la commissione in un secondo momento utilizzando RBF.</p>
<p>In questo modo, se una transazione ha delle fee più basse rispetto a quelle delle altre transazioni nella mempool, ovvero in attesa di essere inserite dai miner nella blockchain, è possibile creare una transazione che sostituisce quella in attesa con una transazione analoga ma con delle fee più alte per poter essere confermata prima.</p>
<p>È una funzione implementata su molti wallet quali Bitcoin Core, Blockstream Green, Electrum, Samourai Wallet, Specter Wallet, SBW Simple Bitcoin Wallet, Moonshine, Coinb.in, ConIO, Nunchuk e alcuni di questi hanno l'opzione RBF abilitata di default.</p>
<p>RBF ha le seguenti caratteristiche:</p>
<ul>
<li>Le transazioni originali non devono essere confermate. Devono indicare la loro sostituibilità in modo esplicito o attraverso l'ereditarietà. Ovvero, se una qualsiasi voce della transazione originale ha un numero di <a href="bip-68-nsequence.html">nSequence</a> inferiore a (0xffffff - 1). Oppure, che le transazioni che l'hanno preceduta indichino la sostituibilità (ereditarietà).</li>
<li>La nuova transazione creata per la sostituzione può includere un input non confermato solo se era incluso nella transazione originale.</li>
<li>La commissione per la nuova transazione deve essere superiore a quella della transazione originale.</li>
<li>Quando il numero di transazioni da sostituire non supera le 100 unità.</li>
<li>La sostituzione delle transazioni è un processo opzionale, anche se alcuni wallet attivano di default RBF</li>
</ul>
<p>Dalla versione 0.16.0 (febbraio 2018) di Bitcoin Core le transazioni RBF sono diventate un comportamento predefinito (da <a href="opt-in.html">opt-in</a> a opt-out) e la <a href="transaction-replacement.html">Transaction replacement</a>, la sostituzione delle transazioni è diventata uno standard de facto sulla rete. Tale cambiamento è stato collegato al limite di 1Mb del blocco e si è reso necessario uno strumento per gli utenti per sostituire le transazioni bloccate. L'attributo più controverso di RBF è che permetteva di inviare fondi a indirizzi assolutamente diversi (full RBF), il che significa praticamente che gli utenti possono fare un double spending con un software standard.</p>
<h5>Preserve payment vs Decrease payment</h5>
<p>Il metodo "Preserve payment" e il metodo "Decrease payment" sono due strategie utilizzate per effettuare RBF.</p>
<ul>
<li><strong>Preserve payment</strong>: (conserva il pagamento) significa che l'importo destinato al destinatario della transazione rimane invariato. Quando utilizzi questa strategia per incrementare la commissione della transazione, il totale inviato al destinatario rimane lo stesso, mentre l'incremento della commissione viene sottratto dal resto che sarebbe tornato al mittente (ovvero, il change).</li>
</ul>
<p>Esempio:</p>
<p>Transazione originale: invii 1 BTC con una commissione di 0.0001 BTC.
Con "Preserve payment": invii sempre 1 BTC al destinatario, ma aumenti la commissione a 0.0005 BTC. La differenza di 0.0004 BTC viene sottratta dal change che tornerebbe al mittente.
* <strong>Decrease payment</strong>:  (riduci il pagamento) comporta una riduzione dell'importo inviato al destinatario per compensare l'aumento della commissione. In questo caso, l'incremento della commissione viene preso dall'importo destinato al destinatario piuttosto che dal change che tornerebbe al mittente.</p>
<p>Esempio:</p>
<p>Transazione originale: invii 1 BTC con una commissione di 0.0001 BTC.
Con "Decrease payment": aumenti la commissione a 0.0005 BTC, quindi invii 0.9996 BTC al destinatario (diminuito di 0.0004 BTC) mantenendo invariato il change che ritorna al mittente.</p>
<p>Un metodo alternativo per velocizzare la conferma di una transazione è <a href="cpfp.html">CPFP Child pays for parent</a>, la cui differenza principale  è data dal caso d'uso perché con RBF è chi effettua il pagamento che può accelerarne la conferma modificando le fee, mentre con CPFP è il ricevente che creando una transazione che spende i bitcoin della transazione non ancora confermata che può incentivare i miner.</p>
<p>La differenza con CPFP può quindi essere così riassunta:</p>
<ul>
<li>RBF consente al mittente di incrementare le fee per ottenere la conferma della transazione più velocemente. Utilizzate RBF se siete il mittente che ha bisogno di velocizzare la transazione.</li>
<li>CPFP consente al destinatario creando una nuova transazione di pagare per ottenere la conferma della transazione più velocemente. Usate il CPFP se siete il destinatario che ha bisogno di velocizzare la transazione.</li>
</ul>
<p>Un funzionamento alternativo al RBF è il <a href="fss.html">FSS o First-Seen-Safe</a>, secondo il quale i nodi della rete bitcoin quando ricevono nuove transazioni controllano se nella mempool c'è già un'altra transazione che spende lo stesso UTXO, e nel caso in cui tale transazione venga trovata, la nuova viene rifiutata e non viene inclusa nel mempool di questo nodo e non viene propagata ulteriormente alla rete.</p></p></section><div><ul class="list-group  list-group-flush"><li class="list-group-item fw-bold">Link utili:</li><li class="list-group-item"><a href="https://bitcoinops.org/en/topics/replace-by-fee/">Replace-by-fee (RBF) sul sito Bitcoin Optech, Operations Technology, Group (in inglese)</a></li><li class="list-group-item"><a href="https://mempool.observer/">Statistiche su quante transazioni sono sostituibili con RBF su mempool.observer</a></li><li class="list-group-item"><a href="https://www.youtube.com/watch?v=-x-MnAFPORk">velocizzare una transazione con Rbf and Cpfp sul canale youtube Final Step Bitcoin</a></li><li class="list-group-item"><a href="https://youtu.be/pJ6JpV9SovU">Bitcoin: la prima conferma tarda ad arrivare?: RBF + test howto sul canale youtube di Massimo Musumeci</a></li></ul></div><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="anchor-outputs.html">Anchor outputs</a></li><li class="list-group-item list-group-item-action"><a href="bip-125-rbf.html">BIP 125 (RBF)</a> (Replace-by-Fee)</li><li class="list-group-item list-group-item-action"><a href="cpfp.html">CPFP</a> (Child pays for parent)</li><li class="list-group-item list-group-item-action"><a href="fee-bumping.html">fee bumping</a></li><li class="list-group-item list-group-item-action"><a href="full-rbf.html">Full RBF</a></li><li class="list-group-item list-group-item-action"><a href="mempool.html">Mempool</a></li><li class="list-group-item list-group-item-action"><a href="opt-in.html">opt-in</a></li><li class="list-group-item list-group-item-action"><a href="transaction-replacement.html">Transaction replacement</a> Sostituzione della transazione</li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2021-10-21</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>