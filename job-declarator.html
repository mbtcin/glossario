<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Job Declarator  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_avanzato.html">avanzato</a></li><li class="breadcrumb-item"><a href="avanzato_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>Job Declarator</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_avanzato.html" class="badge bg-primary">avanzato</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Stratum v2 rappresenta un'evoluzione significativa nel protocollo di comunicazione per il mining di Bitcoin in pool, progettato per superare le limitazioni della sua precedente versione, Stratum v1 . Questo nuovo protocollo funge da ponte di comunicazione tra i minatori e le mining pool, con l'obiettivo primario di migliorare la sicurezza, l'efficienza e, soprattutto, la decentralizzazione del processo di mining . Tra i miglioramenti chiave introdotti da Stratum v2 spiccano una maggiore sicurezza attraverso la crittografia delle comunicazioni, una maggiore efficienza grazie alla trasmissione di dati in formato binario, e una più ampia autonomia per i minatori nella selezione delle transazioni da includere nei blocchi . L'intento è quello di rendere il mining in pool più simile al mining solitario per quanto riguarda il controllo sui set di transazioni . Per raggiungere questi obiettivi, Stratum v2 introduce diverse nuove sub-protocolli . L'evoluzione da Stratum v1 a v2 riflette una crescente necessità di un ecosistema di mining più sicuro, efficiente e decentralizzato. L'introduzione della selezione delle transazioni controllata dai minatori rappresenta un cambio di paradigma fondamentale, spostando il potere decisionale precedentemente centralizzato nelle mani delle pool verso i singoli partecipanti .   </p>
<p>Nel contesto di Stratum v2, il termine "job" si riferisce a un'unità di lavoro assegnata ai minatori, contenente tutte le informazioni necessarie per eseguire l'hashing su un'intestazione di blocco candidata . Le mining pool distribuiscono questi "mining job" ai singoli minatori, indipendentemente dalle loro capacità hardware . Stratum v2 definisce principalmente due tipi di job: lo Standard Job e l'Extended Job . Gli Standard Job sono destinati all'header-only mining (HOM) con Merkle Root fissi, mentre gli Extended Job consentono Merkle Root variabili . Con l'introduzione del Job Declaration Protocol, sono stati introdotti anche i Custom Job, che permettono ai minatori di scegliere i propri set di transazioni . Il concetto di "job" ha quindi subito un'evoluzione in Stratum v2 per accogliere una maggiore autonomia da parte dei minatori riguardo al contenuto dei blocchi su cui lavorano, superando il modello di Stratum v1 incentrato sulle pool . In Stratum v1, i job erano interamente decisi dalla pool. L'introduzione dei "Custom Job" in Stratum v2, e i meccanismi per proporli e dichiararli, indicano un passaggio verso un processo di mining più collaborativo e meno gerarchico.   </p>
<p>Il Job Negotiator è un componente cruciale di Stratum v2 che consente ai minatori di influenzare i set di transazioni inclusi nei blocchi che minano . Questa funzionalità innovativa permette ai minatori di costruire i propri template di blocco e di proporli alla pool per l'approvazione . Questo processo è parte del Job Negotiation Protocol . Il Job Negotiator opera come un sub-protocollo responsabile della distribuzione dei template dei minatori alla pool . In sostanza, i minatori possono negoziare con una pool un template di blocco, incluso il set di transazioni . Questa capacità rappresenta un cambiamento fondamentale nelle dinamiche di potere del mining in pool, offrendo ai minatori un maggiore controllo sull'inclusione delle transazioni e migliorando la resistenza alla censura .   </p>
<p>L'interazione tra il minatore e la pool attraverso il Job Negotiator prevede uno scambio di messaggi strutturato. Sebbene non esista un "Job Negotiator Protocol" formalmente definito nella documentazione, si possono identificare i messaggi chiave coinvolti. Il minatore, attraverso il suo Job Negotiator, richiede innanzitutto un token per poter proporre un lavoro, utilizzando il messaggio AllocateMiningJobToken . La pool risponde con un AllocateMiningJobToken.Success, fornendo il token necessario per le successive fasi della negoziazione . Questo scambio iniziale indica un processo gestito per autorizzare i minatori a partecipare alla negoziazione dei job, prevenendo invii incontrollati. Una volta ottenuto il token, il minatore, spesso in coordinamento con un Template Provider (che può essere un nodo Bitcoin locale), costruisce un template di blocco con le transazioni desiderate. Il Template Provider, come un nodo Bitcoin locale gestito dal minatore, fornisce i dati delle transazioni, che il Job Negotiator utilizza poi per costruire la proposta di job per la pool . Questa proposta viene inviata alla pool tramite il messaggio CommitMiningJob . Nella sua attuale implementazione di riferimento (SRI), la pool è tenuta a rispondere con un messaggio CommitMiningJob.Success, accettando la proposta del minatore . Questo impone alla pool di accettare le transazioni suggerite dal minatore, sottolineando l'enfasi sull'autonomia del minatore nella fase iniziale di implementazione di questa funzionalità. Tuttavia, sono previsti aggiornamenti futuri che includeranno meccanismi di fallback per i minatori nel caso in cui la pool dovesse rifiutare le loro proposte . Questo permetterà ai minatori di passare a un'altra pool o di minare in solitario se le loro selezioni di transazioni venissero costantemente rifiutate, rafforzando ulteriormente la resistenza alla censura. L'intero flusso di interazione, descritto come la "JN dance", evidenzia la connessione iniziale, la richiesta e l'allocazione del token, la consegna del template dal Template Provider, la proposta del job e la sua accettazione .   </p>
<p>Il Job Declarator è un altro ruolo fondamentale in Stratum v2, coinvolto nella dichiarazione di template di blocco personalizzati dai minatori alla pool . Opera all'interno del Job Declaration Protocol . L'obiettivo principale del Job Declarator è impedire che le pool impongano unilateralmente il lavoro ai minatori . Questo protocollo prevede due ruoli distinti: il Job Declarator Client (JDC) lato minatore e il Job Declarator Server (JDS) lato pool . Il JDC riceve i template dal Template Provider e dichiara i job personalizzati al JDS . Il JDS, a sua volta, alloca token al JDC per la dichiarazione di job personalizzati e ne riconosce l'avvenuta dichiarazione .   </p>
<p>Il Job Declaration Protocol prevede una serie di messaggi ben definiti per coordinare la creazione di lavoro personalizzato . Il JDC inizia richiedendo un identificatore per un futuro job di mining al JDS tramite il messaggio AllocateMiningJobToken . Il JDS risponde con successo con AllocateMiningJobToken.Success, fornendo un token che autorizza il client a dichiarare un job di mining . Successivamente, il JDC propone un set selezionato di transazioni al JDS per la creazione di un lavoro personalizzato attraverso il messaggio DeclareMiningJob . Il JDS riconosce l'avvenuta dichiarazione con DeclareMiningJob.Success o segnala un rifiuto con DeclareMiningJob.Error . In caso di collisioni negli ID brevi delle transazioni o se il JDS non riesce a ricostruire l'hash della lista completa delle transazioni, invia un messaggio IdentifyTransactions al JDC, che risponde con IdentifyTransactions.Success fornendo gli hash completi delle transazioni . Se il JDS rileva transazioni mancanti nel messaggio DeclareMiningJob, richiede i dati completi tramite ProvideMissingTransactions, a cui il JDC risponde con ProvideMissingTransactions.Success inviando le transazioni richieste . Infine, una volta trovato un blocco valido, il JDC lo invia al JDS tramite il messaggio SubmitSolution . Questo flusso di messaggi indica un processo strutturato che garantisce la coerenza tra il template proposto dal minatore e la visione della pool, in particolare riguardo al mempool delle transazioni. Il JDC ha anche la responsabilità di implementare strategie di fallback, come il passaggio ad altre pool o il mining solitario, nel caso in cui il JDS rifiuti le dichiarazioni di job o le share, incentivando l'onestà da parte della pool . Questa separazione del Job Declaration Protocol dal Mining Protocol principale permette alle pool di gestire le connessioni di dichiarazione in modo indipendente dalle connessioni di mining (invio di share), migliorando la robustezza e l'efficienza del sistema complessivo .   </p>
<p>Nelle prime versioni di Stratum V2, il "Job Negotiator" era un sottoprotocollo che permetteva ai miner di negoziare con i pool la selezione delle transazioni da includere nel blocco. Il termine "Negotiator" è stato sostituito con "Declarator" per sottolineare che i miner dichiarano unilateralmente i propri template, senza una negoziazione bidirezionale. La modifica rispondeva a feedback della community per chiarire il funzionamento unidirezionale.</p></p></section><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="stratum.html">Stratum</a></li><li class="list-group-item list-group-item-action"><a href="mining.html">Mining</a></li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2025-03-19</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>