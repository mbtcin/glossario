<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>CSFS OP_CHECKSIGFROMSTACKVERIFY  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_avanzato.html">avanzato</a></li><li class="breadcrumb-item"><a href="avanzato_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>CSFS</p><p class="fs-6"><span class="text-secondary">acronimo di: </span>OP_CHECKSIGFROMSTACKVERIFY</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_avanzato.html" class="badge bg-primary">avanzato</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>OP_CHECKSIGFROMSTACKVERIFY, OP_CHECKSIGFROMSTACK, OP_CSFS o più semplicemente CSFS, è un un <a href="opcode.html">opcode</a> che consente di verificare un messaggio arbitrario rispetto a una firma. Può essere utilizzato per implementare una varietà di nuove funzionalità in Bitcoin, come ad esempio:</p>
<ul>
<li>Pagamento delle firme</li>
<li>Delega</li>
<li>Oracoli</li>
<li>Vincoli di protezione da doppia spesa</li>
<li>Introspezione delle transazioni</li>
</ul>
<p>OP_CSFS ha il vantaggio di essere generico e flessibile, ma può anche aumentare la dimensione delle transazioni. Spesso viene proposto insieme a <a href="op_cat.html">OP_CAT</a>, che consente di concatenare due elementi insieme.</p>
<p>È un opcode su <a href="side-chain.html">sidechain</a> basate su <a href="https://elementsproject.org/">ElementsProject.org</a> che viene talvolta proposto per l'implementazione su Bitcoin. Questo opcode consente di verificare se una firma abbia firmato un messaggio arbitrario. L'opcode richiede tre parametri: una firma, un messaggio e una <a href="public-key.html">chiave pubblica</a>.</p>
<p>Gli opcode esistenti di verifica delle firme di Bitcoin, come OP_CHECKSIG, non consentono di specificare un messaggio arbitrario. Il messaggio che utilizzano è derivato dalla transazione che esegue l'opcode di verifica della firma. Ciò consente di verificare che la firma corrisponda a una determinata chiave pubblica e che la chiave privata utilizzata per generare entrambi gli oggetti sia stata utilizzata per autorizzare la spesa. Questo meccanismo è abbastanza potente per garantire la sicurezza degli <a href="utxo.html">UTXO</a> di Bitcoin, ma impedisce di utilizzare firme digitali per autenticare altri tipi di dati nel sistema Bitcoin. La capacità di utilizzare OP_CSFS per verificare un messaggio arbitrario può consentire diverse nuove funzionalità per gli utenti di Bitcoin:</p>
<ul>
<li>
<p><strong>Pagamento delle firme</strong>: se Alice controlla una chiave privata che può firmare una transazione di pagamento a Bob, Bob può utilizzare OP_CSFS per offrire in modo affidabile di pagare Alice per la firma di cui ha bisogno.<br />
Recentemente, i protocolli che coinvolgono il pagamento delle firme assumono tipicamente l'uso di firme adattabili che sono più private e utilizzano meno spazio di blocco.</p>
</li>
<li>
<p><strong>Delega</strong>: Alice potrebbe voler delegare l'autorità di spendere le sue monete a Bob senza creare esplicitamente una transazione onchain che trasferisce le monete a un multisig 1-su-2 tra lei e Bob. Se Alice progetta i suoi <a href="script.html">script</a> con questo tipo di delega in mente, può inserire la chiave pubblica di Bob in un messaggio e utilizzare OP_CSFS per dimostrare che ha delegato l'autorità di spesa a quella chiave.<br />
Un approccio alternativo più privato, più flessibile ed efficiente in termini di spazio di blocco è graftroot, anche se ciò richiede un <a href="soft-fork.html">soft fork</a> che finora è stato solo appena discusso.</p>
</li>
<li>
<p><a href="oracle.html">Oracoli</a>: un oracolo può accettare di firmare un messaggio che indica l'esito di un evento, ad esempio il nome della squadra nazionale che vince un evento sportivo. Due o più utenti possono quindi depositare denaro in uno script utilizzando OP_CSFS che pagherà una persona diversa a seconda della squadra che l'oracolo indica come vincitrice.<br />
L'attenzione più recente sui contratti moderati dagli oracoli coinvolge l'uso di contratti a log discreto (DLC), che possono essere più privati ed efficienti in termini di spazio di blocco.</p>
</li>
<li>
<p><strong>Bond di protezione contro la <a href="double-spend.html">doppia spesa</a></strong>: un servizio può promettere di non cercare mai di spendere due volte i suoi UTXO al fine di incoraggiare i beneficiari ad accettare le sue transazioni non confermate come pagamenti affidabili. Per dimostrare la sua buona fede, il servizio può utilizzare OP_CSFS per offrire il pagamento di un bond a qualsiasi utente che riesca a dimostrare che la stessa chiave è stata utilizzata per creare due firme diverse per transazioni che spendono lo stesso UTXO.
Questo utilizzo di OP_CSFS può essere paragonato a firme a singolo utilizzo che consentono a chiunque veda due firme dalla stessa chiave di derivare la chiave privata utilizzata per crearle, consentendo loro di spendere altri fondi protetti da quella chiave.</p>
</li>
<li>
<p><strong>Introspezione della transazione</strong>: se la stessa coppia di chiave pubblica e firma è valida sia con OP_CSFS che con OP_CHECKSIG, allora il contenuto del messaggio arbitrario passato a OP_CSFS è identico alla transazione di spesa serializzata (e altri dati) implicitamente utilizzata con OP_CHECKSIG. Questo rende possibile inserire una copia convalidata della transazione di spesa nello stack di valutazione dello script, dove altri opcode possono eseguire test su di essa al fine di imporre restrizioni sulla transazione di spesa.<br />
Ad esempio, se OP_CSFS fosse stato disponibile nel 2015 e nel 2016, sarebbe stato possibile implementare le funzionalità di BIP65 OP_CHECKLOCKTIMEVERIFY <a href="cltv.html">CLTV</a> e <a href="bip-112-csv.html">BIP112 OP_CHECKSEQUENCEVERIFY CSV</a> senza alcuna modifica del consenso semplicemente scrivendo uno script di verifica.<br />
Guardando avanti, OP_CSFS potrebbe anche consentire agli script di implementare le funzionalità dell'hash di firma proposto <a href="bip-118-anyprevout.html">SIGHASH_ANYPREVOUT</a>, così come altre proposte di opcode come <a href="bip-119-ctv.html">OP_CHECKTEMPLATEVERIFY</a>. Inoltre, OP_CSFS consentirebbe la creazione di vincoli che limitano il modo in cui un insieme di bitcoin può essere speso, ad esempio, una cassaforte potrebbe limitare la transazione di spesa a un piccolo insieme di <a href="scriptpubkey.html">scriptPubKeys</a> accettabili per limitare il rischio di furto.<br />
Il punto di forza di OP_CSFS è che fornisce una piena introspezione della transazione di firma in modo completamente generico. Il suo punto debole è che richiede essenzialmente l'aggiunta di una copia completa della transazione di firma allo stack, il che potrebbe aumentare significativamente le dimensioni delle transazioni che desiderano utilizzare OP_CSFS per l'introspezione. In confronto, gli opcode di introspezione a scopo specifico come CLTV e CSV richiedono un overhead minimo, ma l'aggiunta di ciascun nuovo opcode di introspezione speciale richiede una modifica del consenso e potrebbe non essere possibile disabilitarne l'uso (anche se diventano impopolari) senza correre il rischio che qualcuno perda denaro.</p>
</li>
</ul></p></section><div><ul class="list-group  list-group-flush"><li class="list-group-item fw-bold">Link utili:</li><li class="list-group-item"><a href="https://bitcoinops.org/en/topics/op_checksigfromstack/">OP_CHECKSIGFROMSTACK sul sito Bitcoin Optech, Operations Technology, Group (in inglese)</a></li><li class="list-group-item"><a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-May/016946.html">OP_CAT & OP_CHECKSIGFROMSTACK sulla mailing list bitcoin-dev (in inglese)</a></li></ul></div><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="bip-112-csv.html">BIP 112 CSV</a> (Check Sequence Verify)</li><li class="list-group-item list-group-item-action"><a href="bip-118-anyprevout.html">BIP 118 (ANYPREVOUT)</a></li><li class="list-group-item list-group-item-action"><a href="bip-119-ctv.html">BIP 119 (CTV)</a> (Check Template Verify)</li><li class="list-group-item list-group-item-action"><a href="cltv.html">CLTV</a> (Check Lock Time Verify)</li><li class="list-group-item list-group-item-action"><a href="opcode.html">Opcode</a></li><li class="list-group-item list-group-item-action"><a href="scriptpubkey.html">ScriptPubKey</a></li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2023-05-25</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>