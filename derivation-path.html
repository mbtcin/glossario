<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Derivation Path Percorso di derivazione  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_intermedio.html">intermedio</a></li><li class="breadcrumb-item"><a href="intermedio_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>Derivation Path</p><p><span class="flag-icon flag-icon-it"></span><span> </span>Percorso di derivazione</p></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_intermedio.html" class="badge bg-primary">intermedio</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Il Derivation Path, o percorso di derivazione, è una sequenza di valori utilizzata dai <a href="hd-wallet.html">Wallet HD</a> per descrivere la creazione delle diverse chiavi partendo dal seed o dalla <a href="master-key.html">Master Key</a>.</p>
<p>La derivazione delle chiavi effettuata dai wallet HD (Hierarchical Deterministic) <em>inventata</em> nel 2012 da Pieter Wuille con il <a href="bip-32-hd-wallet.html">BIP32</a> può essere fatta in molti modi, e si è evoluta nel corso del tempo al punto che il derivation path specificato nel BIP32, composto da una sequenza di campi separati da una barra (slash) del tipo m/0'/0/0 è ormai considerato  deprecato.</p>
<p>Man mano che si sono generati nuovi tipi di indirizzi (per non parlare di altre criptovalute), i wallet si sono evoluti e nonostante siano stati fatti grandi progressi in termini di interoperabilità e per il ripristino, gli sviluppatori di wallet continuano a costruire wallet che:</p>
<ul>
<li>non implementano gli standard BIP</li>
<li>implementano uno o più standard BIP, ma in modo incoerente rispetto ad altri portafogli</li>
<li>implementano uno standard BIP, ma che non è stato ampiamente adottato</li>
<li>o addirittura creano un sistema usato solo da loro, vedi il caso di Electrum</li>
<li>non hanno una documentazione chiara sui loro derivation path e sui processi di backup e ripristino</li>
</ul>
<p>Il Derivation Path viene rappresentato come una stringa di questo tipo:</p>
<ul>
<li><strong>legacy</strong>:</li>
<li><code>m/i/0/0</code> basato sull'esempio nel BIP32, non è più utilizzato e non ci sono hardware wallet moderni che lo supportano nativamente. Software come <a href="bitcoin-core.html">Bitcoin Core</a> possono supportarlo ma non lo utilizzano di default</li>
<li><code>m/0'/0'</code> o <code>m/0'/X'</code> dove la X viene sostituita da 0 per il primo account, 1 per il secondo e così via</li>
<li><code>m/44/0'/0'</code> o <code>m/44/0'/X'</code>  dove la X viene sostituita da 0 per il primo account, 1 per il secondo e così via</li>
<li><strong>standard parziale</strong>: <code>m/84'/0'/0'</code> utilizzato per la generazione degli indirizzi. È necessario conoscerlo, insieme alla xpriv, per poter generare gli indirizzi del proprio wallet</li>
<li><strong>standard completo</strong>: <code>m/84'/0'/0'/0/0</code> rappresenta uno specifico indirizzo. Ogni singolo indirizzo generato (o meglio derivato dalla chiave hd) dal wallet hd, ha questo formato e l'ultima cifra rappresenta il progressivo dell'indirizzo generato. Ad esempio <code>m/84'/0'/0'/0/3</code> è il quarto indirizzo nella propria lista</li>
</ul>
<p>inizialmente descritta nel <a href="bip-44-derivation-paths-for-p2pkh.html">BIP44</a>.</p>
<p>I campi della sequenza hanno un ruolo per specificare come vengono generate le diverse chiavi private.</p>
<p>Purtroppo le diverse implementazioni effettuate dagli sviluppatori di wallet non seguono le stesse modalità, nel corso del tempo sono nati degli standard che non sono adottati allo stesso modo dai produttori di wallet, e questo fa in modo che non sempre sia semplice o addirittura possibile ripristinare un back up da un wallet ad uno di un altro sviluppatore.</p>
<p>Anche i wallet che fanno riferimento al BIP44 possono aver interpretato l'implementazione in modo inconsistente.</p>
<p>I campi della sequenza sono i seguenti:</p>
<p>m / purpose’ / coin_type’ / account’ / change / address_index</p>
<ul>
<li>
<p><strong>m</strong>: è la lettera iniziale che indica il tipo di master key. La lettera m minuscola indica master extended private key, o <a href="xprv.html">xprv</a>, e la M maiuscola per i derivation paths per la <a href="xpub.html">xpub</a>, la master extended public key.</p>
</li>
<li>
<p><strong>Purpose</strong>, Scopo: Questo campo, che è stato aggiunto con il BIP43, indica quale standard di derivazione viene utilizzato. 
Le possibilità possono essere:</p>
<ul>
<li>0 ormai deprecata, è la specifica del percorso di derivazione originale specificata nel <a href="bip-32-hd-wallet.html">BIP 32</a></li>
<li>44 che si riferiscono agli indirizzi <a href="bip-44-derivation-paths-for-p2pkh.html">BIP44</a> P2PKH, gli <a href="legacy-address.html">indirizzi legacy</a> che iniziano con '1'</li>
<li>49 riferito a <a href="bip-49-derivation-paths-for-wrapped-segwit.html">BIP49</a> P2WPKH-nested-in-P2SH / indirizzi SegWit che iniziano con '3'</li>
<li>84 riferito a <a href="bip-84-derivation-paths-for-native-segwit.html">BIP84</a> P2WPKH / indirizzi SegWit nativi che iniziano con 'bc1'.</li>
<li>86 riferito a <a href="bip-86-key-derivation-for-single-key-p2tr-outputs.html">BIP86</a> P2TR / indirizzi <a href="taproot.html">Taproot</a></li>
<li>45 che si riferiscono ai wallet multi-party multi-signature BIP45 P2SH (proposta)</li>
<li>47 che si riferiscono ai <a href="bip-47-reusable-payment-codes-for-hd-wallets.html">codici di pagamento riutilizzabili del BIP47</a>,</li>
<li><a href="bip-48-multi-script-hierarchy-for-multi-sig-wallets.html">48</a> riferito ai wallet hardware a firma multipla</li>
</ul>
</li>
</ul>
<p>Alcuni wallet ne supportano più di uno. Ad esempio, molti wallet ora hanno sia il tipo di indirizzo legacy che quello wrapped o nativo SegWit.</p>
<ul>
<li>
<p><strong>Coin Type</strong>, Tipo di moneta: il derivation type può essere utilizzato su bitcoin e altre criptovalute. Questo campo indica il tipo di criptovaluta, sulla base di un indice. Ad esempio lo 0 indica Bitcoin, 1 testnet, 60 Ethereum (ETH).
Vedi la lista dei tipi di Coin Type su <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">SLIP-0044 : Registered coin types for BIP-0044</a><br />
Notare che il BIP45 indica invece questo livello come "Cosigner Index", l'indice della parte che crea un indirizzo multisig P2SH.</p>
</li>
<li>
<p><strong>Account</strong>, Conto: Questo campo, in un wallet multi-account, indica l'identità o la collezione di indirizzi, che consente agli utenti di tenere conti separati per scopi diversi (es. risparmi, donazioni). Notare che il BIP45 non include questo campo. Il BIP47 attribuisce questo livello alla funzione di "Identità" che si può considerare equivalente a "Conto".</p>
</li>
<li>
<p><strong>Change</strong>: 0 per Receive, 1 per Change. Questo campo, se è presente la costante 0, indica gli indirizzi "external chain" (regolari); se la costante 1, indica gli indirizzi "internal chain" o Change. Si noti che il BIP47 indicava questo livello per notification key e i codici di pagamento ephemeral.</p>
</li>
<li>
<p><strong>Address Index</strong>, Indice indirizzo: Questo campo indica il numero di indirizzo specifico in una sequenza, all'interno di un conto.</p>
</li>
</ul>
<p>Notare che i campi "account" e "address_index" iniziano con zero (0). Analogamente a quanto succede nei linguaggi di programmazione nei quali il primo elemento di un array ha 0 come indice.</p>
<p>Esempio pratico: Un utente ha un wallet bitcoin conforme a BIP44 e vuole individuare il secondo indirizzo nel suo terzo account. Il derivation path per il secondo indirizzo di nel terzo conto sarebbe il seguente: <code>m/44'/0'/2'/1/1</code></p>
<p>Un altro elemento di confusione può verificarsi quando i wallet utilizzano lo stesso derivation path per diversi tipi di script. Soprattutto se si utilizzano tipi di script più nuovi o innovativi, i wallet che hanno destinato tali percorsi ad altri script possono causare errori durante l'importazione.</p></p></section><div><ul class="list-group  list-group-flush"><li class="list-group-item fw-bold">Link utili:</li><li class="list-group-item"><a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">SLIP-0044 : lista dei valori per il campo Coin Type da utilizzare per diverse criptovalute per il BIP-0044</a></li><li class="list-group-item"><a href="https://iancoleman.io/bip39/">tool di Ian Coleman tool per inserire un BIP39 mnemonico o generarne uno nuovo casuale</a></li><li class="list-group-item"><a href="https://learnmeabitcoin.com/technical/keys/hd-wallets/derivation-paths/">Derivation Paths  su Learn Me A Bitcoin (in inglese)</a></li><li class="list-group-item"><a href="https://walletsrecovery.org/">Wallets Recovery, elenco delle modalità di implementazione dei vari wallet</a></li></ul></div><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="bip-32-hd-wallet.html">BIP 32 (HD Wallet)</a></li><li class="list-group-item list-group-item-action"><a href="bip-44-derivation-paths-for-p2pkh.html">BIP 44 (Derivation Paths for P2PKH)</a></li><li class="list-group-item list-group-item-action"><a href="bip-49-derivation-paths-for-wrapped-segwit.html">BIP 49 (Derivation Paths for Wrapped Segwit)</a></li><li class="list-group-item list-group-item-action"><a href="bip-84-derivation-paths-for-native-segwit.html">BIP 84 (Derivation Paths for Native Segwit)</a></li><li class="list-group-item list-group-item-action"><a href="derive.html">Derive</a> Derivare</li><li class="list-group-item list-group-item-action"><a href="deterministic-wallets.html">Deterministic wallets</a> Wallet deterministici </li><li class="list-group-item list-group-item-action"><a href="hd-wallet.html">HD wallet</a> (Hierarchical Deterministic wallet) Wallet deterministici gerarchici</li><li class="list-group-item list-group-item-action"><a href="key-path.html">key path</a></li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2022-07-18</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>