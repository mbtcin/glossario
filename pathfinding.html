<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>pathfinding  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_avanzato.html">avanzato</a></li><li class="breadcrumb-item"><a href="avanzato_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>pathfinding</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_avanzato.html" class="badge bg-primary">avanzato</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Quando viene effettuato un pagamento sulla rete <a href="lightning-network.html">Lightning Network</a>, il pagamento deve attraversare uno o più canali dal nodo del mittente del pagamento a quello del destinatario.</p>
<p>La ricerca del percorso dal mittente al destinatario è un processo chiamato Pathfinding. Poiché l'instradamento viene effettuato dal mittente, quest'ultimo deve trovare un percorso adeguato per raggiungere la destinazione.</p>
<p>Pathfinding (la ricerca del percorso), path selection (la selezione del percorso), <a href="mpp.html">MPP multipart payments</a> (i pagamenti multiparte) e il ciclo di tentativi di pagamento per tentativi ed errori occupano la maggior parte del livello di pagamento nella parte superiore della suite del protocollo Lightning.</p>
<p>Il termine pathfinding può essere un po' fuorviante, perché suggerisce che venga ricercato un unico percorso che colleghi due nodi.</p>
<p>Se il mittente e il destinatario sono collegati ad altri nodi ben connessi e dispongono di almeno un canale con capacità adeguata, ci saranno migliaia di percorsi. Il problema diventa selezionare il percorso migliore che riuscirà a consegnare il pagamento, tra migliaia di percorsi possibili.</p>
<p>Per selezionare il percorso migliore, dobbiamo innanzitutto definire cosa intendiamo per "migliore". </p>
<p>I criteri possono essere molti e diversi, come ad esempio:</p>
<ul>
<li>Percorsi con sufficiente liquidità. Ovviamente, se un percorso non ha abbastanza liquidità per instradare il nostro pagamento, non è un percorso adatto.</li>
<li>Percorsi con <a href="fee.html">fee</a> basse. Se abbiamo diversi candidati, potremmo voler selezionare quelli con fee più basse.</li>
<li>Percorsi con <a href="timelocklocktime.html">timelock</a> brevi. Potremmo voler evitare di bloccare i nostri fondi per troppo tempo e quindi selezionare percorsi con timelock più brevi.</li>
</ul>
<p>Non c'è certezza sul bilanciamento dei canali: se conoscessimo gli esatti balance di ogni canale, potremmo calcolare uno o più percorsi di pagamento usando uno qualsiasi degli algoritmi standard di pathfinding. Ma non conosciamo i balance dei canali; conosciamo solo la capacità aggregata dei canali, che viene comunicata dai nodi. Affinché un pagamento abbia successo, deve esserci un balance adeguato sul lato di invio del canale. Se non sappiamo come è distribuita la capacità tra i partner del canale, non sappiamo se c'è un balance sufficiente nella direzione in cui stiamo cercando di inviare il pagamento.</p>
<p>I balance non vengono annunciati negli aggiornamenti del canale per due motivi: privacy e scalabilità. In primo luogo, l'annuncio dei balance ridurrebbe la privacy della Lightning Network, perché consentirebbe di sorvegliare i pagamenti attraverso l'analisi statistica delle variazioni dei balance. In secondo luogo, se i nodi annunciassero i balance (a livello globale) a ogni pagamento, la scalabilità della Lightning Network sarebbe pari a quella delle transazioni Bitcoin on-chain, che vengono trasmesse a tutti i partecipanti. Pertanto, i balance non vengono annunciati.</p>
<p>Il nodo Lightning crea una lista di percorsi candidati, li filtra e li ordina in base ad alcuni parametri (ad esempio tenendo conto dei nodi attraverso i quali ha già inviato pagamenti con successo) e li prova in sequenza.
Se tutti i nodi si comportano bene, verificare di un singolo percorso dovrebbe essere veloce (~ 1 secondo) indipendentemente dalla dimensione della rete, ma se i nodi non si comportano bene, il tempo di verifica può crescere esponenzialmente.</p>
<p>Calcolare il percorso più economico può essere una funzione complicata, e Rene Pickhardt e Stefan Richter hanno effettuato uno studio che ha rilevato che, se nella funzione di pagamento è inclusa una base_fee maggiore di 0, 
la complessità di questo calcolo è tale da poter essere definito un problema NP-completo (nella teoria della complessità computazionale i problemi NP-completi sono i più difficili problemi nella classe NP "problemi non deterministici in tempo polinomiale").</p>
<p>Per questo motivo è nata l'iniziativa <a href="zero-base-fee.html">Zero Base Fee</a>, che promuove l'impostazione base_fee a 0 per migliorare le prestazioni di Lightning Network, consentendo di effettuare anche pagamenti per importi che senza tale impostazione hanno alte probabilità di fallire.</p></p></section><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="lightning-network.html">Lightning Network</a></li><li class="list-group-item list-group-item-action"><a href="ln-routing.html">LN Routing</a> (Lightning Network Routing)</li><li class="list-group-item list-group-item-action"><a href="payment-channel.html">Payment Channel</a> Canale di pagamento</li><li class="list-group-item list-group-item-action"><a href="pickhardt-payments.html">Pickhardt Payments</a></li><li class="list-group-item list-group-item-action"><a href="zero-base-fee.html">Zero Base Fee</a></li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2022-10-19</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>