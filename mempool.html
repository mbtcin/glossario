<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mempool  - Glossario Bitcoin</title><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><link href="bootstrap-5.2.0-dist/css/bootstrap.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/css/flag-icons.min.css" integrity="sha512-UwbBNAFoECXUPeDhlKR3zzWU3j8ddKIQQsDOsKhXQGdiB5i3IHEXr9kXx82+gaHigbNKbTDp3VY/G6gZqva6ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/></head><body><div><header style="background: #ff9300;"><header class="p-4 bg-white flex flex-col lg:flex-row justify-between items-center"><div><a href="https://bitcoinitalianetwork.com/" class="text-lg"><span class="font-bold text-black"><span class="bg-green-500">&nbsp;₿itcoin</span><span>Italia</span><span class="bg-red-500 text-white">Network&nbsp;</span></span></a></div></header></header><div class="container"><nav><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://bitcoinitalianetwork.com/">Home</a></li><li class="breadcrumb-item"><a href="https://glossario.bitcoinitalianetwork.com/">Glossario</a></li><li class="breadcrumb-item"><a href="livello_intermedio.html">intermedio</a></li><li class="breadcrumb-item"><a href="intermedio_tecnologia.html">tecnologia</a></li></ol></nav></div><main><div class="container"><div class="card"><div class="card-body"><h5 class="card-body"><div><p><span class="flag-icon flag-icon-gb"></span><span> </span>Mempool</p><div></div></div></h5><p class="card-text"><div><p><span class="text-secondary">Difficoltà: </span><a href="livello_intermedio.html" class="badge bg-primary">intermedio</a></p><p><span class="text-secondary">Argomento: </span><span class="badge rounded-pill bg-success">tecnologia</span></p><hr/><p class="fw-bold">DEFINIZIONE</p><section><p class="fs-5"><p>Il termine mempool è la contrazione di memory pool.</p>
<p>È quella zona di memoria, una specie di area di attesa, dove i <a href="node.html">nodi</a> tengono le <a href="tx.html">transazioni</a> che non sono ancora <a href="confirmation.html">confermate</a> (pending), ovvero che non sono state ancora inserite in un <a href="block.html">blocco</a> della <a href="blockchain.html">blockchain</a>, in attesa di essere prelevate da un <a href="miner.html">miner</a> che le inserisca in un blocco e aggiunga questo blocco alla blockchain.</p>
<p>Non esiste una mempool condivisa tra i nodi, anche se le mempool dei vari nodi tendono a convergere come contenuto: le transazioni Bitcoin vengono trasmesse attraverso un sistema distribuito asincrono tra i vari nodi che gestiscono la propria mempool e ci memorizzano le transazioni da confermare ricevute dagli altri nodi, e le mantengono in base a regole e parametri impostati nel proprio software. </p>
<p>I nodi devono verificare che le transazioni all'interno del mempool siano valide verificando schemi di firma corretti, che gli output non superino gli input e che i fondi non siano stati <a href="double-spend.html">spesi due volte</a>.</p>
<p>Le transazioni che si trovano nella mempool vengono anche chiamate <a href="0-conf.html">0-conf</a>, perché non hanno ancora ricevuto una conferma.</p>
<p>Le transazioni nella mempool possono essere sostituite, un processo che viene chiamato <a href="transaction-replacement.html">unconfirmed transaction replacement</a>, ad esempio modificate tramite il meccanismo <a href="rbf.html">RBF Replace by Fee</a>, che consente a chi ha creato la transazione di incentivare i miner ad inserire prima la transazione in blockchain aumentando le fee.</p>
<p>Anche il destinatario della transazione può incentivare i miner a confermare la transazione attraverso <a href="cpfp.html">CPFP Child pays for parent</a>.</p>
<p>L'idea che una transazione che rimane troppo tempo nella mempool senza essere confermata scada, è sbagliata.</p>
<p>Il protocollo bitcoin non ha una regola per far scadere le transazioni che sono nella mempool e che non sono state confermate, in pratica non esiste un campo time che possa essere usato per fare in modo che si possa far scadere dopo un certo periodo di tempo una transazione in attesa di essere confermata.
Una volta creata una transazione Bitcoin, non scade mai automaticamente.
In teoria si potrebbe creare una transazione che rimane bloccata a 0 conferme per alcuni anni, e poi all'improvviso essere inserita in un blocco e quindi confermata.</p>
<p>Ogni full node bitcoin ha una sua mempool, che di default non supera i 300 Mbyte ma tale dimensione può essere impostata per ogni nodo.
Si può vedere usando il comando:</p>
<p><code>bitcoin-cli getmempoolinfo</code></p>
<p>che visualizza nel campo maxmempool il valore impostato come dimensione della mempool.</p>
<p>Questo spazio non misura quanto occuperanno effettivamente le transazioni nel blocco, ma la memoria necessaria dal software per gestire questi dati, e dipende anche dalla piattaforma utilizzata per far girare il software del nodo.</p>
<p>Teniamo conto che ogni nodo si collega a diversi nodi peer e a questi farà il relay delle nuove transazioni che riceve.
Quando la coda di transazioni (backlog) del nodo arriva a raggiungere l'occupazione di memoria del valore di maxmempool, elimina le transazioni con le feerate più basse e aumenta il suo minMempoolFeeRate. Comunica il nuovo minMempoolFeeRate ai suoi peer, dicendo loro essenzialmente di non inoltrare transazioni con una feerate inferiore per il momento.</p>
<p>Ogni nodo agisce individualmente, quindi un nodo con un mempool più grande o un'architettura diversa potrebbe eliminare le transazioni prima o dopo.
Inoltre, i nodi mantengono una copia delle transazioni rilevanti per il proprio wallet. Anche se tutti gli altri nodi hanno eliminato una transazione, il mittente e i destinatari della transazione ne conservano una copia.
Quindi, se la transazione è tua o sei il destinatario, continuerai a vederla come pending o on-chain quando confermata.</p>
<p>Dopo che il backlog diminuisce al punto che la memoria necessaria è inferiore alla maxmempool impostata e con un certo ritardo aggiunto, un nodo diminuirà il proprio minMempoolFeeRate e ricomincerà ad accettare le transazioni che in precedenza aveva espulso.</p>
<p>Il nodo di <a href="bitcoin-core.html">Bitcoin Core</a> ha il parametro <code>mempoolexpiry</code> che indica il numero di ore dopo le quali le transazioni vengono rimosse dalla mempool, ed è impostato di default a 336 ore ovvero 2 settimane (precedendemente era 72 ore); ogni nodo può impostare liberamente questo parametro.</p>
<p>Bisogna quindi considerare che anche se la maggior parte dei nodi dovesse dimenticare una transazione, ovvero cancellarla dalla mempool, non significa che tutti debbano farlo o lo faranno.</p>
<p>La possibilità che una transazione possa, in un certo modo, scadere comunque esiste: quando si trasmette una transazione, si invia un frame tx a tutti i peer connessi. Questi peer memorizzano la transazione nella loro mempool e dicono a tutte le loro connessioni che hanno una nuova transazione. Quando quelle connessioni non ce l'hanno ancora, la chiedono, ed è così che una transazione si diffonde nella rete dei nodi bitcoin.
Ad un certo punto ogni nodo della rete avrà la transazione nella sua mempool, e a quel punto non sarà più inviata sulla rete.</p>
<p>Da Bitcoin Core 0.14.0, la mempool è salvata su disco, quindi persiste anche dopo il riavvio. Nelle versioni precedenti, un riavvio comportava anche la cancellazione del mempool.</p>
<p>Se la mempool viene cancellata, ne viene forzata la cancellazione, o viene cancellata per superamento della memoria o per altri motivi, e la transazione viene eliminata dai vari nodi, queste condizioni rendono molto improbabile che la transazione sparisca dall'intera rete, ma non impossibile.</p>
<p>A partire da Bitcoin Core 0.14.0, questi sono i modi per cui una transazione può lasciare la mempool:</p>
<ul>
<li>La transazione è stata inclusa in un blocco.</li>
<li>La transazione o uno dei suoi antenati non confermati è in conflitto con una transazione inclusa in un blocco.</li>
<li>La transazione è stata sostituita da una versione più recente, ad esempio <a href="rbf.html">tramite RBF</a></li>
<li>La transazione si trovava in fondo alla mempool (se ordinata per <a href="feerate.html">feerate</a> ovvero in base alle fee per dimensione), il mempool ha raggiunto il suo limite di dimensione (vedere l'opzione -maxmempool) e una nuova transazione a tariffa più alta è stata accettata, sfrattando quella in fondo.</li>
<li>La transazione è scaduta per timeout (per impostazione predefinita, 14 giorni dopo l'inserimento).</li>
<li>Inoltre, le transazioni che hanno lasciato la mempool possono sempre rientrarvi. Ad esempio, quando fanno parte del portafoglio locale e vengono ritrasmesse, o quando vengono ricevute di nuovo attraverso la rete. Lo sfratto non implica l'annullamento di una transazione.</li>
</ul></p></section><div><ul class="list-group  list-group-flush"><li class="list-group-item fw-bold">Link utili:</li><li class="list-group-item"><a href="https://coindipity.com/blog/cos-e-la-mempool/">Cos’è la Mempool? - su coindipity</a></li><li class="list-group-item"><a href="https://jochen-hoenicke.de/queue/#BTC,30d,weight">peso della mempool su Johoe's Bitcoin Mempool Statistics</a></li><li class="list-group-item"><a href="https://mempool.observer/">mempool observer</a></li><li class="list-group-item"><a href="https://mempool.space/it/">Dettaglio della mempool sul sito mempool.space</a></li><li class="list-group-item"><a href="https://txcity.io/v/btc">Grafica animata sul congestionamento della mempool</a></li><li class="list-group-item"><a href="https://www.blockchain.com/charts/mempool-size">Statistiche sulla mempool nel sito blockchain.com</a></li></ul></div><div class="row p-4 fw-light"><ul class="list-group"><li class="list-group-item list-group-item-primary">Vedi anche</li><li class="list-group-item list-group-item-action"><a href="0-conf.html">0-conf</a> (zeroconf o zero confirmation)</li><li class="list-group-item list-group-item-action"><a href="bip-125-rbf.html">BIP 125 (RBF)</a> (Replace-by-Fee)</li><li class="list-group-item list-group-item-action"><a href="block.html">Block</a> Blocco</li><li class="list-group-item list-group-item-action"><a href="blockchain.html">Blockchain</a> Catena di blocchi</li><li class="list-group-item list-group-item-action"><a href="confirmation.html">Confirmation</a> Conferma</li><li class="list-group-item list-group-item-action"><a href="cpfp.html">CPFP</a> (Child pays for parent)</li><li class="list-group-item list-group-item-action"><a href="full-node.html">Full Node</a> nodo completo</li><li class="list-group-item list-group-item-action"><a href="full-rbf.html">Full RBF</a></li><li class="list-group-item list-group-item-action"><a href="mempool-sniping.html">mempool sniping</a></li><li class="list-group-item list-group-item-action"><a href="rbf.html">RBF</a> (Replace-by-fee)</li><li class="list-group-item list-group-item-action"><a href="transaction-replacement.html">Transaction replacement</a> Sostituzione della transazione</li><li class="list-group-item list-group-item-action"><a href="tx.html">TX</a> (Transaction) Transazione</li></ul></div><hr/><p class="text-end fw-lighter"><span class="text-secondary">aggiornato il </span>2022-01-10</p></div></p></div></div></div></main><div class="container-fluid text-white bg-dark"><div class="container"><footer class="py-5"><div class="row"><div>Scarica il glossario: 
<a href="glossario.pdf" class="text-white">pdf</a> 
<a href="glossario.epub" class="text-white">epub</a></div><div class="row fs-6 fw-lighter">il Glossario Bitcoin in italiano è disponibile su ipfs: <ul><li><span><a href="https://shrill-water-3846.on.fleek.co/" class="text-white">tramite Fleek</a> <a href="https://docs.ipfs.io/how-to/websites-on-ipfs/introducing-fleek/" class="text-white">(cos'è Fleek?)</a></span></li></ul></div></div><div class="d-flex justify-content-between py-4 my-4 border-top"><a href="https://BitcoinItaliaNetwork.com" style="color: white;">Bitcoin Italia Network</a><a href="https://nostree.me/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" style="color: white;">21 Milioni di chiacchiere</a><ul class="list-unstyled d-flex"><li class="ms-3"><a href="https://t.me/+iCd-GTx2Sx04Mzk0" class="text-white"><i class="bi bi-telegram"></i></a></li><li class="ms-3"><a href="https://twitter.com/21MdiC_BTC" class="text-white"><i class="bi bi-twitter-x"></i></a></li><li class="ms-3"><a href="https://www.facebook.com/groups/1479005739604711" class="text-white"><i class="bi bi-facebook"></i></a></li><li class="ms-3"><a href="https://nostr.com/npub14yzptn3vkf4ravfl9dhu49pzqpsap3m5emze2e6v4tuyceht72eqkhzldt" class="text-white"><i class="bi bi-clipboard2-check"></i></a></li><li class="ms-3"><a href="https://www.threads.net/@21mdic.btc" class="text-white"><i class="bi bi-threads"></i></a></li></ul></div></footer></div></div></div><script src="bootstrap-5.2.0-dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script></body></html>